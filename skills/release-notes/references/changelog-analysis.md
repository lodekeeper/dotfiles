# Changelog Analysis Framework

## How to Prioritize Changes

When analyzing a changelog for the release header, categorize each commit:

### Tier 1: Must Mention (Operator-Facing Impact)
- **Breaking changes**: Dropped runtime versions, removed flags, changed defaults
- **Security fixes**: Vulnerability patches, dependency CVEs
- **Critical bug fixes**: Crash fixes, data corruption, consensus failures
- **New required flags**: Config changes operators need to make
- **Migration steps**: Things operators must do when upgrading

### Tier 2: Should Mention (Significant Improvements)
- **Performance improvements**: Memory reduction, faster processing, lower CPU
- **New features operators care about**: APIs, CLI flags, monitoring endpoints
- **Stability fixes**: OOM prevention, crash-loop fixes, sync improvements
- **PeerDAS/networking changes**: Custody, peering, gossip improvements

### Tier 3: Brief Mention or Skip (Internal)
- **Refactors**: Code cleanup, type changes (skip unless perf impact)
- **Test improvements**: CI, E2E, flaky test fixes (skip)
- **Documentation**: Only mention if user-facing docs changed
- **Dependency bumps**: Only mention if security-related
- **Maintenance**: Build system, workflows (skip)

## Grouping Related Changes

Combine related PRs into single highlights:

### Example: Memory improvements
Instead of listing 3 separate PRs:
- Remove in-memory state caches (#8813)
- Replace bigint-buffer (#8789)
- Signature sets use indices (#8803)

Write one highlight:
> **Reduced memory usage** — In-memory state caches removed, bigint-buffer replaced with a
> lighter alternative, and signature verification now uses validator indices. (#8813, #8789, #8803)

### Example: PeerDAS improvements  
Instead of listing separately:
- Block import after half columns (#8818)
- Backpressure fix (#8885)

Write:
> **PeerDAS supernode stability** — Blocks import after receiving half the columns, and a new
> write queue backpressure mechanism prevents OOM during finalized sync. (#8818, #8885)

## Generating the Changelog Section

The full changelog below the header is auto-generated. Use the RC release body as a starting
point — it's generated by the release workflow from conventional commits.

Ensure the `Full Changelog` comparison link is correct:
```
[Full Changelog](https://github.com/ChainSafe/lodestar/compare/<prev-stable>...<new-version>)
```

## Checklist Before Finalizing

- [ ] Recommendation level stated (mandatory/recommended/optional)
- [ ] Breaking changes called out prominently
- [ ] 3-6 highlights covering the most impactful changes
- [ ] PR numbers referenced for each highlight
- [ ] Migration steps included if any (with code blocks)
- [ ] Link to full changelog at the bottom
- [ ] Discord version fits under 2000 chars
- [ ] No internal/CI/test changes in highlights
